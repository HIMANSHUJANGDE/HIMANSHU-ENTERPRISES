<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AIO 45mm Photo Printing</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 20px;
}
#previewArea {
    width: 210mm;        /* A4 width */
    height: 297mm;       /* A4 height */
    border: 1px solid #000;
    position: relative;
    margin-top: 20px;
    background: white;
}

.photoPrint {
    position: absolute;
    width: 45mm;        /* PHOTO WIDTH = 45MM */
    height: auto;       /* Landscape shape preserved */
    transform: rotate(90deg); /* Make photo landscape */
    object-fit: cover;
}
#controls {
    margin-bottom: 10px;
}
button {
    padding: 8px 16px;
    margin-top: 10px;
}
</style>
</head>
<body>

<h2>AIO 45mm Photo Printing System</h2>

<div id="controls">
    <label>Select Photos: </label>
    <input type="file" id="imgFiles" accept="image/*" multiple />

    <br><br>

    <label>Number of pieces per photo: </label>
    <input type="number" id="pcs" min="1" max="50" value="4">

    <br>

    <button onclick="generateLayout()">Generate Layout</button>
    <button onclick="window.print()">Print</button>
</div>

<div id="previewArea"></div>

<script>
function generateLayout() {
    const files = document.getElementById("imgFiles").files;
    const pcs = parseInt(document.getElementById("pcs").value);
    const preview = document.getElementById("previewArea");

    preview.innerHTML = ""; // clear previous layout

    let x = 5;   // start margin
    let y = 5;
    const stepX = 55; // spacing between images
    const stepY = 55;

    [...files].forEach(file => {
        for (let i = 0; i < pcs; i++) {

            const img = document.createElement("img");
            img.className = "photoPrint";
            img.src = URL.createObjectURL(file);

            img.style.left = x + "mm";
            img.style.top = y + "mm";

            preview.appendChild(img);

            x += stepX;
            if (x > 150) { // wrap column
                x = 5;
                y += stepY;
            }
        }
    });
}
</script>

</body>
</html>
