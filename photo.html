<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>A4 Photo Print – AIO</title>

<style>
/* ------------------------- A4 PAGE PRINTING ------------------------- */
@page {
    size: A4 portrait;
    margin: 10mm;
}

body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
}

#controls {
    margin-bottom: 20px;
}

@media print {
    #controls { display: none; }
}

/* ----------------------- PHOTO GRID LAYOUT -------------------------- */
#photoSheet {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    gap: 5px;
}

/* Each photo box (smaller than passport size, landscape) */
.photoBox {
    width: 70px;    
    height: 50px;   
    overflow: hidden;
    border: 1px solid #999;
    display: flex;
    justify-content: center;
    align-items: center;
}

.photoBox img {
    width: 100%;
    height: auto;
}
</style>
</head>

<body>

<div id="controls">
    <h2>A4 Photo Printing – AIO Version</h2>

    <label><b>Select images:</b></label><br>
    <input id="imageFiles" type="file" accept="image/*" multiple><br><br>

    <label><b>How many copies per image:</b></label><br>
    <input id="piecesInput" type="number" value="1" min="1" style="width:80px;"><br><br>

    <button onclick="generate()">Generate Layout</button>
    <button onclick="window.print()">Print</button>
</div>

<div id="photoSheet"></div>

<script>
function generate() {
    const files = document.getElementById("imageFiles").files;
    const pieces = parseInt(document.getElementById("piecesInput").value);
    const sheet = document.getElementById("photoSheet");

    sheet.innerHTML = ""; // Clear previous layout

    if (!files.length) {
        alert("Please select images.");
        return;
    }

    Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = event => {
            for (let i = 0; i < pieces; i++) {
                const box = document.createElement("div");
                box.className = "photoBox";

                const img = document.createElement("img");
                img.src = event.target.result;

                box.appendChild(img);
                sheet.appendChild(box);
            }
        };
        reader.readAsDataURL(file);
    });
}
</script>

</body>
</html>
